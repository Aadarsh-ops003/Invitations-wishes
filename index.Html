<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ultimate Surprise & Share</title>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Poppins:wght@300;600&display=swap" rel="stylesheet">
    <style>
        :root { --pink: #ff4d94; --gold: #ffd700; --neon: #ff00ff; --bg-dark: #0f0113; }
        body, html { margin: 0; padding: 0; height: 100%; width: 100%; transition: background 1.5s ease; color: white; font-family: 'Poppins', sans-serif; overflow: hidden; }
        .bg-starry { background: radial-gradient(circle at center, #1b2735 0%, #090a0f 100%); }
        .bg-sunset { background: linear-gradient(135deg, #2d0b3d, #e91e63, #ff9800); background-size: 400% 400%; animation: sunsetAnim 10s infinite; }
        @keyframes sunsetAnim { 0%{background-position:0% 50%} 50%{background-position:100% 50%} 100%{background-position:0% 50%} }
        .bg-hearts { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: -1; }
        .floating-heart { position: absolute; color: rgba(255, 77, 148, 0.4); animation: float 6s linear infinite; }
        @keyframes float { 0% { transform: translateY(110vh) scale(0); opacity: 1; } 100% { transform: translateY(-10vh) scale(1.5); opacity: 0; } }
        .screen { display: none; flex-direction: column; align-items: center; justify-content: center; text-align: center; min-height: 100vh; padding: 20px; box-sizing: border-box; }
        .active { display: flex; animation: fadeIn 0.8s ease; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .heart-btn { font-size: 110px; cursor: pointer; filter: drop-shadow(0 0 30px var(--pink)); margin: 20px 0; transition: 0.3s; }
        .ticket-glow { background: rgba(255, 215, 0, 0.1); border: 2px solid var(--gold); border-radius: 15px; padding: 20px; box-shadow: 0 0 25px rgba(255, 215, 0, 0.5); }
        .premium-card { background: rgba(15, 1, 19, 0.85); border: 2px solid var(--neon); border-radius: 25px; width: 95%; max-width: 380px; padding: 40px 20px; box-shadow: 0 0 40px var(--neon); }
        .wish-title { font-family: 'Dancing Script', cursive; font-size: 2.5em; color: var(--pink); margin-bottom: 10px; }
        .btn-main { background: var(--pink); color: white; border: none; padding: 15px 40px; border-radius: 50px; cursor: pointer; font-weight: bold; margin-top: 20px; box-shadow: 0 5px 15px rgba(255,77,148,0.4); }
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.96); z-index: 1000; justify-content: center; align-items: center; }
        .modal-content { background: #111; padding: 25px; border-radius: 20px; width: 90%; max-width: 360px; border: 1px solid var(--neon); text-align: center; }
        .modal-content input, .modal-content select { width: 100%; padding: 12px; margin: 8px 0; border-radius: 10px; border: none; background: #222; color: white; box-sizing: border-box; }
        .share-options { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 20px; }
        .share-btn { padding: 12px; border-radius: 12px; border: none; font-weight: bold; cursor: pointer; color: white; font-size: 14px; }
        .wa { background: #25D366; } .ig { background: linear-gradient(45deg, #f09433, #e6683c, #dc2743, #cc2366, #bc1888); } .fb { background: #1877F2; } .sc { background: #FFFC00; color: black; }
        .footer { margin-top: 30px; font-size: 12px; font-weight: bold; letter-spacing: 2px; color: var(--gold); }
    </style>
</head>
<body class="bg-sunset">

    <div class="bg-hearts" id="heart-container"></div>

    <div id="screen1" class="screen active">
        <h1 style="font-family: 'Dancing Script', cursive; font-size: 3em;">Hey <span class="display-name"></span>!</h1>
        <p>Unbox your special surprise...</p>
        <div class="heart-btn" id="heart">‚ù§Ô∏è</div>
        <p style="font-size: 0.8em; letter-spacing: 3px; color: var(--pink);">HOLD TO UNLOCK</p>
    </div>

    <div id="screen2" class="screen">
        <h2 style="color: var(--gold);">Golden Ticket Found! üé´</h2>
        <div class="ticket-glow">
            <h3 style="margin: 0;">SPECIAL PASS</h3>
            <p style="font-size: 1.2em;">For: <span class="display-name"></span></p>
        </div>
        <button class="btn-main" onclick="claimTicket()">REVEAL NOW ‚ú®</button>
    </div>

    <div id="screen3" class="screen">
        <div class="premium-card">
            <div class="wish-title" id="final-wish-title"></div>
            <p id="final-message" style="line-height: 1.6; font-size: 1.1em;"></p>
            <div id="invite-box" style="display:none; margin: 15px 0; border-top: 1px solid rgba(255,255,255,0.1); padding-top: 15px;">
                <p>üìÖ <b>Date:</b> <span id="view-date"></span></p>
                <p>üìç <b>Venue:</b> <span id="view-venue"></span></p>
            </div>
            <div style="margin-top: 20px; font-size: 0.9em; opacity: 0.8;">From: <b id="sender-name" style="color: var(--gold);"></b></div>
        </div>
        <button onclick="toggleModal('createModal', true)" style="background:none; border:1px solid #444; color:#777; padding:8px 20px; border-radius:20px; margin-top:25px; cursor:pointer;">‚ú® Create Your Wish</button>
        <div class="footer">DEVELOPER BY AADARSH ‚ù§Ô∏è</div>
    </div>

    <div id="createModal" class="modal">
        <div class="modal-content">
            <h3 style="color: var(--neon);">Wish Creator</h3>
            <input type="text" id="in-to" placeholder="Receiver's Name">
            <select id="in-type" onchange="checkType(this.value)">
                <option value="birthday">Birthday Wish üéÇ</option>
                <option value="proposal">Love Proposal ‚ù§Ô∏è</option>
                <option value="anniversary">Anniversary üíç</option>
                <option value="invitation">Party Invitation üåπ</option>
                <option value="sexual">Private Invitation üî•</option>
            </select>
            <div id="invite-fields" style="display:none;">
                <input type="text" id="in-date" placeholder="Date & Time">
                <input type="text" id="in-venue" placeholder="Venue / Jagah">
            </div>
            <input type="text" id="in-from" placeholder="Your Name">
            <button class="btn-main" onclick="generateAndShare()" style="width:100%">Generate & Share</button>
            <button onclick="toggleModal('createModal', false)" style="background:none; border:none; color:#888; margin-top:10px;">Close</button>
        </div>
    </div>

    <div id="shareSheet" class="modal">
        <div class="modal-content" style="border-color: var(--gold);">
            <h3 style="color: var(--gold); margin: 0;">Share Surprise via üì≤</h3>
            <div class="share-options">
                <button class="share-btn wa" onclick="directShare('wa')">WhatsApp</button>
                <button class="share-btn ig" onclick="directShare('ig')">Instagram</button>
                <button class="share-btn fb" onclick="directShare('fb')">Facebook</button>
                <button class="share-btn sc" onclick="directShare('sc')">Snapchat</button>
            </div>
            <button onclick="toggleModal('shareSheet', false)" style="background:none; border:none; color:#888; margin-top:10px;">Cancel</button>
        </div>
    </div>

    <script>
        // ADSTERRA SMARTLINK
        const SMARTLINK = "https://www.effectivegatecpm.com/zm365eyn?key=bf11a0360a79a30106cb46c22fd7d880";
        
        let generatedUrl = "";
        const params = new URLSearchParams(window.location.search);
        const to = params.get('to') || "Friend", from = params.get('from') || "Aadarsh", type = params.get('type') || "birthday";

        document.body.className = ['proposal', 'anniversary', 'sexual'].includes(type) ? "bg-starry" : "bg-sunset";
        document.querySelectorAll('.display-name').forEach(el => el.innerText = to);
        document.getElementById('sender-name').innerText = from;

        const wishData = {
            birthday: { title: "Happy Birthday! üéÇ", msg: `Wishing you a day as glowing as this screen, ${to}! ü•≥` },
            proposal: { title: "Be Mine? ‚ù§Ô∏è", msg: `${to}, my world is better with you. Will you be mine forever? ü•∞` },
            anniversary: { title: "Happy Anniversary! üíç", msg: `May our love keep shining brighter than the stars, ${to}. ‚ú®` },
            invitation: { title: "You're Invited! üåπ", msg: `Hey ${to}, save the date for my special party!` },
            sexual: { title: "A Private Secret... üî•", msg: `Hey ${to}, waiting for some quality time with you... üòâ` }
        };

        document.getElementById('final-wish-title').innerText = wishData[type].title;
        document.getElementById('final-message').innerText = wishData[type].msg;
        if(params.get('date')) {
            document.getElementById('invite-box').style.display = 'block';
            document.getElementById('view-date').innerText = params.get('date');
            document.getElementById('view-venue').innerText = params.get('venue');
        }

        let holdTimer;
        document.getElementById('heart').addEventListener('mousedown', () => holdTimer = setTimeout(() => nextScreen(2), 1200));
        document.getElementById('heart').addEventListener('touchstart', () => holdTimer = setTimeout(() => nextScreen(2), 1200));
        document.getElementById('heart').addEventListener('mouseup', () => clearTimeout(holdTimer));
        document.getElementById('heart').addEventListener('touchend', () => clearTimeout(holdTimer));

        function nextScreen(n) {
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.getElementById('screen'+n).classList.add('active');
        }

        function claimTicket() {
            window.open(SMARTLINK, '_blank'); // Open Ad Link
            confetti({ particleCount: 150, spread: 80, origin: { y: 0.6 } });
            setTimeout(() => nextScreen(3), 500);
        }

        function toggleModal(id, s) { document.getElementById(id).style.display = s ? 'flex' : 'none'; }
        function checkType(v) { document.getElementById('invite-fields').style.display = (v === 'invitation' || v === 'sexual') ? 'block' : 'none'; }

        function generateAndShare() {
            const t = document.getElementById('in-to').value, f = document.getElementById('in-from').value, ty = document.getElementById('in-type').value;
            if(t && f) {
                window.open(SMARTLINK, '_blank'); // Open Ad Link on Generate
                generatedUrl = `${window.location.origin}${window.location.pathname}?to=${encodeURIComponent(t)}&from=${encodeURIComponent(f)}&type=${ty}`;
                if(document.getElementById('in-date').value) generatedUrl += `&date=${encodeURIComponent(document.getElementById('in-date').value)}&venue=${encodeURIComponent(document.getElementById('in-venue').value)}`;
                toggleModal('createModal', false);
                toggleModal('shareSheet', true);
            } else { alert("Names please!"); }
        }

        function directShare(p) {
            const txt = `‚ú® Surprise for ${document.getElementById('in-to').value}! Open it: `;
            navigator.clipboard.writeText(generatedUrl);
            let url = "";
            if(p === 'wa') url = `https://wa.me/?text=${encodeURIComponent(txt + generatedUrl)}`;
            else if(p === 'fb') url = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(generatedUrl)}`;
            else { alert("Link Copied! Wahan ja kar paste karein."); url = p === 'ig' ? "https://instagram.com" : "https://snapchat.com"; }
            window.open(url, '_blank');
        }

        setInterval(() => {
            const h = document.createElement('div'); h.classList.add('floating-heart'); h.innerHTML = '‚ù§Ô∏è';
            h.style.left = Math.random()*100+'vw'; h.style.animationDuration = (Math.random()*3+4)+'s';
            document.getElementById('heart-container').appendChild(h);
            setTimeout(() => h.remove(), 6000);
        }, 400);
    </script>
</body>
</html>
